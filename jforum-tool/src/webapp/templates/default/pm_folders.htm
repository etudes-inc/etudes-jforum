<#--
/**********************************************************************************
 * $URL: https://source.etudes.org/svn/apps/jforum/tags/2.27/jforum-tool/src/webapp/templates/default/pm_folders.htm $
 * $Id: pm_folders.htm 8540 2014-08-29 22:18:25Z murthyt $ 
 *********************************************************************************** 
 * 
 * Copyright (c) 2014 Etudes, Inc. 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License"); 
 * you may not use this file except in compliance with the License. 
 * You may obtain a copy of the License at 
 * 
 * http://www.apache.org/licenses/LICENSE-2.0 
 * 
 * Unless required by applicable law or agreed to in writing, software 
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 ***********************************************************************************/
 -->
<#include "header.htm"/>
<script language="JavaScript" type="text/javascript">
<#include "js/pm_moderation.js"/>
function select_switch(obj) 
{
	var status = obj.checked;
	
	var eleId = document.getElementsByName("id");
	
	for (i = 0; i < eleId.length; i++) 
	{
		eleId[i].checked = status;
	}
}

function toggle_switch(ele)
{
	
	var chkAllEle = document.getElementsByName("chkAll");
	
	if (!ele.checked)
	{
		for (i = 0; i < chkAllEle.length; i++) 
		{
			chkAllEle[i].checked = false;
		}
	}
	else
	{
		var allStatus = true;
		
		var eleId = document.getElementsByName("id");
		
		for (i = 0; i < eleId.length; i++) 
		{						
			if (!eleId[i].checked)
			{
				allStatus = false;
				break;
			}
		}
		
		for (i = 0; i < chkAllEle.length; i++) 
		{
			chkAllEle[i].checked = allStatus;
		}
	}
}
</script>
<table cellspacing="0" cellpadding="10" width="100%" align="center" border="0">
	<tbody>
		<tr>
			<td>
				<#--table cellspacing="0" cellpadding="0" width="100%" align="center" border="0">
					<tbody>
						<tr>
							<td valign="top" align="middle" width="100%">
								<table height="40" cellspacing="2" cellpadding="2" border="0">
									<tbody>
										<tr>
											<td valign="bottom">
												<span class="gen">
												<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/inbox/date/d")}">
												<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_inbox.png" alt="inbox icon"/>${I18n.getMessage("PrivateMessage.inbox")}
												</a>
											</td>
											<td valign="bottom">
												&nbsp;&nbsp;
												<span class="gen">
												<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/sentbox/date/d")}">
												<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_sentbox.png" alt="sent icon"/>${I18n.getMessage("PrivateMessage.sentbox")}
												</a>
												</span>
											</td>
											<td valign="bottom">
												&nbsp;&nbsp;
												<span class="gen">
												<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/drafts/date/d")}">
												<#if (userPMDraftsCount?? && userPMDraftsCount > 0)>
				                              		<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_draft_folder.png" alt="pm draft icon"/>${I18n.getMessage("PrivateMessage.drafts")}: (${userPMDraftsCount}) 
				                              	<#else>
				                              		<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_draft_folder.png" alt="pm draft icon"/>${I18n.getMessage("PrivateMessage.drafts")}&nbsp;
				                              	</#if>												
												</a>
												</span>
											</td>
											<td valign="bottom">
												&nbsp;&nbsp;
												<span class="gen">
												<a class="toolUiLink"  href="${JForumContext.encodeURL("/pm/folders")}">
													<img class="imgicon" src="${contextPath}/templates/${templateName}/images/folders.png" alt="folders icon" title="${I18n.getMessage("PrivateMessage.folders")}"/><b>${I18n.getMessage("PrivateMessage.folders")}</b>
												</a>
												</span>
											</td>
										</tr>
									</tbody>
								</table>
							</td>
						</tr>
					</tbody>
				</table-->
				<br>
				<table class="forumline" cellspacing="1" cellpadding="3" width="100%" border="0">
					
					<tr>
						<td width="180" rowspan="3" valign="top" nowrap="nowrap">
						<#--start left menu-->
						<table cellspacing="1" cellpadding="3" width="100%" border="0">								
							<tr>
								<td>
									<span class="gen">
									<#if !inbox?default(false)>
									<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/inbox/date/d")}">
									<#else>
									<b>
									</#if>
									<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_inbox.png" alt="inbox icon"/>${I18n.getMessage("PrivateMessage.inbox")}<#if (inboxUnreadCount??) && (inboxUnreadCount > 0)>&nbsp;<b>(${inboxUnreadCount})</b></#if>
									<#if !inbox?default(false)>												
									</a>
									<#else>
									</b>
									</#if>
									</span>								
								</td>
							</tr>
							
							<tr>
								<td>
									<span class="gen">
									<#if !draftsList?default(false)>
									<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/drafts/date/d")}">
									<#else>
									<b>
									</#if>
									<#if (userPMDraftsCount?? && userPMDraftsCount > 0)>
	                              		<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_draft_folder.png" alt="pm draft icon"/>${I18n.getMessage("PrivateMessage.drafts")}: (${userPMDraftsCount}) 
	                              	<#else>
	                              		<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_draft_folder.png" alt="pm draft icon"/>${I18n.getMessage("PrivateMessage.drafts")}&nbsp;
	                              	</#if>												
									<#if !draftsList?default(false)>
									</a>
									<#else>
									</b>
									</#if>
									</span>
								</td>
							</tr>
							
							<tr>
								<td>								
									<span class="gen">
									<#if !sentbox?default(false)>
									<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/sentbox/date/d")}">
									<#else>
									<b>
									</#if>
									<img class="imgicon" src="${contextPath}/templates/${templateName}/images/pm_sentbox.png" alt="sent icon"/>${I18n.getMessage("PrivateMessage.sentbox")}
									<#if !sentbox?default(false)>
									</a>
									<#else>
									</b>
									</#if>
									</span>								
								</td>
							</tr>
							
							<tr>
								<td>								
									<span class="gen">
									<a class="toolUiLink"  href="${JForumContext.encodeURL("/pm/folders")}">
										<img class="imgicon" src="${contextPath}/templates/${templateName}/images/folders.png" alt="folders icon" title="${I18n.getMessage("PrivateMessage.folders")}"/><b>${I18n.getMessage("PrivateMessage.folders")}</b>
									</a>
									</span>								
								</td>
							</tr>
							<#list pmFoldersList as pmFolder>
							<#if (pmFolder.id > 0)>
							<#if (pmFolder.id > 0)>									
							<#if (pmFolder.name?trim?length > 15)>
								<#assign pmFolderName = (pmFolder.name?trim?substring(0, 15)) + "..."/>
							<#else>
								<#assign pmFolderName = pmFolder.name/>									
							</#if>
							<tr>
								<td valign="middle" align="left">
									<span class="gen">
									<#if folderId?? && folderId == pmFolder.id>
										<img height="18" src="${contextPath}/templates/${templateName}/images/spacer.gif" width="22"/><b>${pmFolderName}<#if (pmFolder.unreadCount > 0)>&nbsp;<b>(${pmFolder.unreadCount})</b></#if></b>
									<#else>
										<img height="18" src="${contextPath}/templates/${templateName}/images/spacer.gif" width="22"/><a class="toolUiLink"  href="${JForumContext.encodeURL("/pm/messages/${pmFolder.id}")}">${pmFolderName}<#if (pmFolder.unreadCount > 0)>&nbsp;<b>(${pmFolder.unreadCount})</b></#if></a>
									</#if>
									
									</span>
								</td>
							</tr>
							</#if>
							</#if>
							</#list>
							
						</table>
						<#--end left menu-->
						
						</td>
																				
					</tr>
					
					
					<#if pmFoldersList.size() == 0>
					<tr>
					
					<td valign="top" style="border-left: #c8d1d7 2px solid;">
					
					<table cellspacing="1" cellpadding="3" width="100%" border="0">
					<td width="100%" >
						<span class="gen">
						<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/addFolder")}" accesskey="${I18n.getMessage("new-access")}" title="${I18n.getMessage("add-pm-folder-access-description")}">
							<img class="imgicon" src="${contextPath}/templates/${templateName}/images/folder_add.png" alt="add icon" title="${I18n.getMessage("add-pm-folder-access-description")}"/>${I18n.getMessage("PrivateMessage.List.ClickToNew")}
						</a>
					</td>
					</tr>

					<tr>
						<td class="lightCol" nowrap="nowrap" width="95%" valign="middle" align="left">							
							<span class="gen">
							&nbsp;${I18n.getMessage("PrivateMessage.manageFoldersDescription")}&nbsp;
							</span>
						</td>
					</tr>
					<tr>
						<td height="100" valign="top" colspan="2">
							<br>
							<span class="gen">
							&nbsp;${I18n.getMessage("PrivateMessage.noFolders")}&nbsp;
							</span>
						</td>
					</tr>
					</table>
					
					</td>
					
					<#else>
					<form action="${JForumContext.encodeURL("/jforum")}" method="post" name="privmsg_fol_list" id="privmsg_fol_list">
					<input type="hidden" name="module" value="${moduleName}" />
					<input type="hidden" id="action" name="action" value="deleteFolders">
					<tr>
					<td valign="top" style="border-left: #c8d1d7 2px solid;">
					
					<table cellspacing="2" cellpadding="4" width="100%" border="0">
					<tr>
					<td width="100%" colspan="2">
						<#--img src="${contextPath}/templates/${templateName}/images/spacer.gif" alt="" width="1" height="30" /-->
						<span class="gen">
						<a class="toolUiLink" href="${JForumContext.encodeURL("/pm/addFolder")}" accesskey="${I18n.getMessage("new-access")}" title="${I18n.getMessage("add-pm-folder-access-description")}">
							<img class="imgicon" src="${contextPath}/templates/${templateName}/images/folder_add.png" alt="add icon" title="${I18n.getMessage("add-pm-folder-access-description")}"/>${I18n.getMessage("PrivateMessage.List.ClickToNew")}
						</a>
						&nbsp;&nbsp;
						<a class="toolUiLink" href="#" onclick="javascript:deletePMFolders();" title="${I18n.getMessage("delete-pm-folder-access-description")}" accesskey="${I18n.getMessage("delete-access")}">
							<img class="imgicon" src="${contextPath}/templates/${templateName}/images/folder_delete.png" alt="folder delete icon" title="${I18n.getMessage("delete-pm-folder-access-description")}"/>${I18n.getMessage("PrivateMessage.deleteSelected")}
						</a>
						</span>
					</td>
					</tr>
					<#if errorMessage?exists>
					<tr>
						<td align="center" colspan="2"><span class="redclass">${errorMessage}</span></td>
					</tr>
					</#if>
					<#--folders list-->
					<tr>
						<td class="lightCol" valign="middle" align="center">
							<#if (pmFoldersList.size() > 0)>
								<input type="checkbox" id="chkAll" name="chkAll" onclick="javascript:select_switch(this);" />
							</#if>
						</td>
						<td class="lightCol" nowrap="nowrap" valign="middle" align="left">
							
							<span class="gen">
							&nbsp;${I18n.getMessage("PrivateMessage.manageFoldersDescription")}&nbsp;
							</span>
						</td>
					</tr>
					<#list pmFoldersList as pmFolder>
					<tr>
						<td class="row1" valign="middle" align="center"><input type="checkbox" value="${pmFolder.id}" name="id" onclick="javascript:toggle_switch(this);"/></td>
						<td class="row1" width="95%" valign="middle" align="left"><span class="gen"><a class="toolUiLink" href="${JForumContext.encodeURL("/pm/editFolder/${pmFolder.id}")}">${pmFolder.name}</a></span></td>
					</tr>
					</#list>
					</form>	
					
					</table>
					</td>
					</#if>
					<tr>
					<td class="catBottom" align="right" colspan="2" height="28" style="border-left: #c8d1d7 2px solid;">
					</tr>
				</table>
				
			</td>
		</tr>
	</tbody>
</table>
<#include "bottom.htm"/>